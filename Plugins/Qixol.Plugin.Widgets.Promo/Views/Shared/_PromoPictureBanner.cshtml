@model List<PromoBannerDisplayModel>

@{
    Layout = "";

    Html.AddScriptParts("~/Plugins/Widgets.QixolPromo/Scripts/jquery.nivo.slider.js");
    Html.AddCssFileParts("~/Plugins/Widgets.QixolPromo/Content/nivoslider/nivo-slider.css");
    Html.AddCssFileParts("~/Plugins/Widgets.QixolPromo/Content/nivoslider/themes/custom/custom.css");
}
@using Nop.Web.Framework.UI

<style>

    .theme-custom .nivo-controlNav a.active {
    }

    .theme-custom .nivo-controlNav a {
        width: 6px;
        height: 6px;
        display: none;
    }

</style>

@helper RenderBannerPicture(string pictureUrl, string text, string link, string dataTransition = "")
{
    if (!string.IsNullOrEmpty(pictureUrl))
    {
        if (!string.IsNullOrEmpty(link))
        {
            <a href="@link">
                <img src="@pictureUrl" data-thumb="@pictureUrl" data-transition="@dataTransition" alt="" title="@text" />
            </a>
        }
        else
        {
            <img src="@pictureUrl" data-thumb="@pictureUrl" data-transition="@dataTransition" alt="" title="@text" />
        }
    }
}

@foreach (var banner in Model)
{
    if (banner.Pictures.Count == 1)
    {
        var usePicture = banner.Pictures.First();
        
        <div class="banner-single-image">
            @RenderBannerPicture(usePicture.PictureUrl, usePicture.Comment, usePicture.Url, string.Empty)
        </div>
    }
    else
    { 
        if (banner.TransitionType.Equals("Plugins.Widgets.QixolPromo.TransitionType.stackHorizontal"))
        {
            <div class="stack-wrapper">
                @foreach (var bannerPicture in banner.Pictures)
                {
                    @RenderBannerPicture(bannerPicture.PictureUrl, bannerPicture.Comment, bannerPicture.Url, banner.TransitionType)
                }
            </div>
        }
        else
        {
            if (banner.TransitionType.Equals("Plugins.Widgets.QixolPromo.TransitionType.stackVertical"))
            {
            <div class="stack-wrapper">
                @foreach (var bannerPicture in banner.Pictures)
                {
                    @RenderBannerPicture(bannerPicture.PictureUrl, bannerPicture.Comment, bannerPicture.Url, banner.TransitionType)<br />
                }
            </div>
            }
            else
            {
                <div class="banner-wrapper theme-custom" style="margin-top: 0px;">
                    <div id="nivo-slider_@banner.BannerId" class="nivoSlider">
                        @foreach (var bannerPicture in banner.Pictures)
                        {
                            @RenderBannerPicture(bannerPicture.PictureUrl, bannerPicture.Comment, bannerPicture.Url, banner.TransitionType)
                        }
                    </div>
                </div>

                <script type="text/javascript">
                    $(window).load(function () {
                        $('#nivo-slider_@banner.BannerId').nivoSlider();
                    });
                </script>
            }
        }
    }
}